<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

<main class="contact-page">
  <section class="contact-hero">
    <div class="container">
      <h1>Contáctanos</h1>
      <p>Estamos aquí para ayudarte. Completa el formulario y nuestro equipo te responderá a la brevedad.</p>
    </div>
  </section>

  <section class="contact-content">
    <div class="container contact-layout">
      
      <article class="contact-card form-card">
        <header class="card-header">
          <i class='bx bxs-envelope'></i>
          <h2>Envíanos un Mensaje</h2>
        </header>

        <div *ngIf="showSuccess" class="alert alert-success">
          <i class='bx bxs-check-circle'></i>
          <div class="alert-content">
            <strong>¡Enviado con éxito!</strong>
            <p>{{ successMessage }}</p>
          </div>
          <button class="alert-close" (click)="closeSuccess()" title="Cerrar">&times;</button>
        </div>
        
        <div *ngIf="showError" class="alert alert-error">
          <i class='bx bxs-error-circle'></i>
          <div class="alert-content">
            <strong>Error al enviar</strong>
            <p>{{ errorMessage }}</p>
          </div>
          <button class="alert-close" (click)="closeError()" title="Cerrar">&times;</button>
        </div>

        <form [formGroup]="contactForm" (ngSubmit)="submitForm()" novalidate>
          <div class="form-group">
            <label for="name">Nombre completo</label>
            <input id="name" type="text" formControlName="name" placeholder="Ej: Juan Pérez" class="form-input">
            <div *ngIf="name?.invalid && (name?.dirty || name?.touched)" class="form-error">
              <small *ngIf="name?.errors?.['required']">El nombre es requerido.</small>
            </div>
          </div>

          <div class="form-group">
            <label for="email">Correo electrónico</label>
            <input id="email" type="email" formControlName="email" placeholder="tu@correo.com" class="form-input">
            <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="form-error">
              <small *ngIf="email?.errors?.['required']">El email es requerido.</small>
              <small *ngIf="email?.errors?.['email']">Ingresa un email válido.</small>
            </div>
          </div>
          
          <div class="form-group">
            <label for="phone">Teléfono (Opcional)</label>
            <input id="phone" type="tel" formControlName="phone" placeholder="Ej: 2245 123456" class="form-input">
          </div>
          
          <div class="form-group">
            <label for="message">Tu mensaje</label>
            <textarea id="message" formControlName="message" rows="5" placeholder="Escribe tu consulta aquí..." class="form-input"></textarea>
            <div *ngIf="message?.invalid && (message?.dirty || message?.touched)" class="form-error">
              <small *ngIf="message?.errors?.['required']">El mensaje no puede estar vacío.</small>
              <small *ngIf="message?.errors?.['minlength']">El mensaje debe tener al menos 10 caracteres.</small>
            </div>
          </div>

          <button type="submit" class="btn" [disabled]="contactForm.invalid || isSubmitting">
            <span *ngIf="!isSubmitting">
              <i class='bx bxs-paper-plane'></i> Enviar Mensaje
            </span>
            <span *ngIf="isSubmitting" class="loading-state">
              <div class="spinner"></div> Enviando...
            </span>
          </button>
        </form>
      </article>
      
      <article class="contact-card info-card">
        <header class="card-header">
          <i class='bx bxs-info-circle'></i>
          <h2>Nuestra Información</h2>
        </header>

        <div class="info-grid">
          <div class="info-item">
            <i class='bx bxs-map'></i>
            <div class="info-details">
              <h3>Dirección</h3>
              <p>{{ contactInfo.address }}</p>
            </div>
          </div>

          <div class="info-item">
            <i class='bx bxs-phone'></i>
            <div class="info-details">
              <h3>Teléfono</h3>
              <p>{{ contactInfo.phone }}</p>
            </div>
          </div>

          <div class="info-item">
            <i class='bx bxs-envelope-open'></i>
            <div class="info-details">
              <h3>Correo Electrónico</h3>
              <a href="mailto:{{ contactInfo.email }}">{{ contactInfo.email }}</a>
            </div>
          </div>

          <div class="info-item">
            <i class='bx bxs-time-five'></i>
            <div class="info-details">
              <h3>Horarios de Atención</h3>
              <p [innerHTML]="contactInfo.hours.replace('\n', '<br>')"></p>
            </div>
          </div>
        </div>

        <div class="map-container">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3228.847527653653!2d-57.85408668473336!3d-36.21953598011383!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x959b85a3c051a37b%3A0x6b1f238b6d4e23a!2sBuenos%20Aires%20565%2C%20B7100%20Dolores%2C%20Provincia%20de%20Buenos%20Aires!5e0!3m2!1ses-419!2sar!4v1663000000000" 
            width="100%" 
            height="250" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </article>

    </div>
  </section>



</main>